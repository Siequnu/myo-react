{% extends "header_superintendant.html" %}
{% from 'bootstrap/form.html' import render_form %}
{% from 'bootstrap/form.html' import render_field %}
{% block app_content %}
{% block body %}

<div class="container">
  <br>
  <div class="container">
    <div class="row">
      <div class="col-md-10">

        <h1><i class="fa fa-palette"></i> Activities</h1>

      </div>
    </div>
    <hr>

    <p><a href="#"><button class="btn btn-outline-success" data-toggle="modal" data-target="#newActivityModal"><i
            class="fa fa-plus-circle"></i>
          New activity</button></a></p>


    <!-- New activity modal -->
    <div class="modal fade" id="newActivityModal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <h1 class="display-5"><i class="fa fa-puzzle-piece"></i> New activity</h1>
            <hr class="my-4">
            <form method="post" action="{{url_for('activities.create_new_activity')}}" enctype="multipart/form-data">
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
              {{ render_field(form.name) }}
              {{ render_field(form.description) }}
              {{ render_field(form.activity_duration) }}

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            {{ render_field(form.submit, button_style="success") }}
            </form>
          </div>
        </div>
      </div>
    </div>

    <br>
    <link rel="stylesheet" href="/static/css/form-control-borderless.css">
    <div class="row justify-content-left">
      <div class="col-12 col-md-10 col-lg-8">
        <form class="card">
          <div class="card-body row no-gutters align-items-center">
            <div class="col-auto">
              <i class="fas fa-search h4 text-body">
              </i>
            </div>
            <!--end of col-->
            <div class="col">
              <input id="myInput" class="form-control form-control-lg form-control-borderless" type="search"
                placeholder="Search for activities">
            </div>
            <!--end of col-->
          </div>
        </form>
      </div>
      <!--end of col-->
    </div>

    <br>
    <h3>Activities</h3>
    <br>

    {% if activities|length == 0 %}
    <p>There are no activities.</p>

    {% else %}
    <div class="table-responsive">
      <table id="dtBasicExample" summary="User table"
        class="table table-striped table-bordered table-sm table-hover text-small" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th><i class="fa fa-paint-brush"></i></th>
            <th><i class="fa fa-font"></i></th>
            <th><i class="fa fa-fingerprint"></i></th>
            <th><i class="fa fa-tools"></i></th>
          </tr>
        </thead>
        <tbody id="searchableTable">
          {% for activity in activities %}
          <tr>
            <td>{{activity.name}}</td>
            <td>{{activity.description}}</td>
            <td>{{activity.user.username}}</td>
            <td>
              <a href="{{ url_for ('activities.view_activity_details', activity_id = activity.id)}}"
                class="btn btn-outline-primary btn-sm" role="button">View<i class="fa fa-chevron-right ml-2"></i> </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
          </tr>
        </tfoot>
      </table>
    </div>
    <!--end of .table-responsive-->
    {% endif %}

  </div>
</div>
{% endblock %}
</div>
{% endblock %}